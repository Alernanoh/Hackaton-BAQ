<div class="carrito card">
  <h4>Tu donación</h4>

  <!-- Área con scroll para productos -->
  <div class="carrito-scroll">
    <div *ngFor="let item of carrito" class="item-carrito">
      <img [src]="item.imagen" alt="{{ item.nombre }}" />
      <div class="info">
        <strong>{{ item.nombre }}</strong>
        <p class="precio-carrito">${{ item.precio.toFixed(2) }}</p>
      </div>
      <div class="acciones-carrito">
        <button class="btn-quitar" (click)="quitarProducto.emit(item)" title="Eliminar">
          <!-- icono eliminar -->
          <svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 20 20" fill="#d32f2f">
            <path d="M7.5 8.5v6m5-6v6M4 6.5h12M8.5 3.5h3a1 1 0 0 1 1 1v1h-5v-1a1 1 0 0 1 1-1zM5 6.5v10a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-10"/>
          </svg>
        </button>
        <div class="cantidad-selector">
          <button (click)="cambiarCantidad(item, -1)" [disabled]="item.cantidad <= 1">-</button>
          <input type="number" [value]="item.cantidad" min="1" readonly>
          <button (click)="cambiarCantidad(item, 1)">+</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Totales -->
  <div class="resumen">
    <p>Subtotal: <strong>${{ subtotal.toFixed(2) }}</strong></p>
    <p>Cargos de pasarela: <strong>${{ cargosPasarela.toFixed(2) }}</strong></p>
    <p class="total">Total: <strong>${{ total.toFixed(2) }}</strong></p>
  </div>

  <!-- Botón de pagar alineado a la derecha -->
  <button 
    class="btn-pagar-destacado" 
    (click)="abrirPagoCarrito()" 
    [disabled]="carrito.length === 0">
    Pagar
  </button>

  <!-- Modal de pago -->
  <div class="modal-pago" *ngIf="mostrarModalPago">
    <div class="modal-pago-content">
      <button class="modal-close" (click)="cerrarPagoCarrito()">×</button>
      <app-form
        [montoCarrito]="total"
        [modoCarrito]="true"
        (donacionExitosa)="onDonacionExitosa($event)">
      </app-form>
    </div>
  </div>

  <!-- Modal de agradecimiento -->
  <div class="modal-pago" *ngIf="agradecimientoVisible">
    <div class="modal-pago-content" style="text-align:center; max-width:350px;">
      <div style="font-size:2.5rem; color:#43a047; margin-bottom:0.5rem;">🎉</div>
      <h2 style="color:#f7941d; margin-bottom:0.5rem;">¡Gracias por tu donación!</h2>
      <p style="margin-bottom:1.2rem;">
        Tu aporte de <strong>${{ donacionRecienteMonto | number:'1.2-2' }}</strong> ayudará a alimentar esperanza.<br>
        ¡Juntos hacemos la diferencia!
      </p>
      <button class="btn-orange" (click)="cerrarAgradecimiento()">Aceptar</button>
    </div>
  </div>
</div>
